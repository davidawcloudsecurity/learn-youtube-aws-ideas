```
9. Question
Category: DOP – Monitoring and Logging
A leading IT consultancy firm has several Python-based Flask and Django web applications hosted in AWS. Some of the firm’s developers are freelance contractors located overseas. The firm wants to automate remediation actions for issues relating to the health of its AWS resources by using the AWS Health Dashboard and the AWS Health API. Additionally, there is a requirement to automatically detect any IAM access key owned by the firm that is accidentally or deliberately exposed on a public GitHub repository. Upon detection, the IAM access key must be immediately deleted, and a notification must be sent to the DevOps team. Once detected, the IAM access key must be immediately deleted, and a notification should be sent to the DevOps team.

What solution can a DevOps Engineer do to meet this requirement?


Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends a notification to the IT Security team using Amazon SNS. Create an AWS Config rule for the AWS_RISK_CREDENTIALS_EXPOSED event with Multi-Account Multi-Region Data Aggregation to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule.
Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends a notification to the IT Security team using Amazon SNS. Use a combination of Amazon GuardDuty and Amazon Macie to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule.

Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends notification to the IT Security team using Amazon SNS. Create a EventBridge rule with an aws.health event source and the AWS_RISK_CREDENTIALS_EXPOSED event to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule.


Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends a notification to the IT Security team using Amazon SNS. Create an AWS Personal Health Dashboard rule for the AWS_RISK_CREDENTIALS_EXPOSED event to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule.
Correct
AWS Step Functions lets you coordinate multiple AWS services into serverless workflows so you can build and update apps quickly. Using Step Functions, you can design and run workflows that stitch together services, such as AWS Lambda, AWS Fargate, and Amazon SageMaker AI, into feature-rich applications. Workflows are made up of a series of steps, with the output of one step acting as input into the next. Application development is simpler and more intuitive using Step Functions, because it translates your workflow into a state machine diagram that is easy to understand, easy to explain to others, and easy to change.

AWS proactively monitors popular code repository sites for exposed AWS Identity and Access Management (IAM) access keys. On detection of an exposed IAM access key, AWS Health generates an AWS_RISK_CREDENTIALS_EXPOSED Event. In response to this event, you can set up an automated workflow deletes the exposed IAM Access Key, summarizes the recent API activity for the exposed key, and sends the summary message to an Amazon Simple Notification Service (SNS) Topic to notify the subscribers which are all orchestrated by an AWS Step Functions state machine.

Step Function Automation Diagram using EventBridge

You can use Amazon EventBridge to detect and react to changes in the status of AWS Personal Health Dashboard (AWS Health) events. Then, based on the rules that you create, EventBridge invokes one or more target actions when an event matches the values that you specify in a rule. Depending on the type of event, you can send notifications, capture event information, take corrective action, initiate events, or take other actions.

You can automate actions in response to new scheduled events for your EC2 instances. For example, you can create EventBridge rules for EC2 scheduled events generated by the AWS Health service. These rules can then trigger targets, such as AWS Systems Manager Automation documents, to automate actions.

Hence, the correct answer is: Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends notification to the IT Security team using Amazon SNS. Create a EventBridge rule with an aws.health event source and the AWS_RISK_CREDENTIALS_EXPOSED event to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule.

The option that says: Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends a notification to the IT Security team using Amazon SNS. Use a combination of Amazon GuardDuty and Amazon Macie to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule is incorrect. You can’t monitor any exposed IAM keys from the Internet using Amazon GuardDuty and Amazon Macie. Amazon GuardDuty is a threat detection service that continuously monitors for malicious activity and unauthorized behavior to protect your AWS accounts and workloads while Amazon Macie is simply a security service that uses machine learning to automatically discover, classify, and protect sensitive data in AWS.

The option that says: Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends a notification to the IT Security team using Amazon SNS. Create an AWS Config rule for the AWS_RISK_CREDENTIALS_EXPOSED event with Multi-Account Multi-Region Data Aggregation to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule is incorrect. The use of Multi-Account Multi-Region Data Aggregation in CloudTrail will not satisfy the requirement. An aggregator is simply an AWS Config resource type that collects AWS Config configuration and compliance data from multiple accounts across multiple regions.

The option that says: Set up three Lambda functions in AWS Step Functions that deletes the exposed IAM access key, summarizes the recent API activity for the exposed key using CloudTrail and sends a notification to the IT Security team using Amazon SNS. Create an AWS Personal Health Dashboard rule for the AWS_RISK_CREDENTIALS_EXPOSED event to monitor any exposed IAM keys from the Internet. Set the Step Functions as the target of the EventBridge rule is incorrect. You have to use the AWS Health API instead of the AWS Personal Health Dashboard. The AWS_RISK_CREDENTIALS_EXPOSED event is only applicable from an aws.health event source and not from an AWS Personal Health Dashboard rule.

 

References:

https://aws.amazon.com/blogs/compute/automate-your-it-operations-using-aws-step-functions-and-amazon-cloudwatch-events/

https://docs.aws.amazon.com/health/latest/ug/cloudwatch-events-health.html

 

Check out these AWS Health and Amazon CloudWatch Cheat Sheets:

https://tutorialsdojo.com/aws-health/

https://tutorialsdojo.com/amazon-cloudwatch/
```
